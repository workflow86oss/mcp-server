#!/bin/bash
set -e

WORKFLOW_ID=$1
COMPONENT_ID=$2
P_VALUES=$3

if [ -z "$WORKFLOW_ID" ] || [ -z "$COMPONENT_ID" ]; then
  echo "Usage: $0 <workflow_id> <component_id> [placeholder_values_json]"
  echo "Example: $0 123e4567-e89b-12d3-a456-426614174000 550e8400-e29b-41d4-a716-446655440000 '{\"name\":\"Alice\"}'"
  exit 1
fi
if [[ -z "${P_VALUES}" ]]; then
  ARGS="{\"workflowId\":\"$WORKFLOW_ID\", \"componentId\":\"$COMPONENT_ID\"}"
else
  ARGS="{\"workflowId\":\"$WORKFLOW_ID\", \"componentId\":\"$COMPONENT_ID\", \"placeholderValues\": ${P_VALUES}}"
fi

./exec.sh "run-workflow" "$ARGS"
